// Language configuration
const translations = {
    en: {
        appTitle: "Emergency Supply Optimizer",
            dashboard: "Dashboard",
            drones: "Drones",
            offline: "Offline",
            activeAlerts: "Active Alerts",
            quickActions: "Quick Actions",
            disasterMap: "Disaster Map",
            resourceAllocation: "Resource Allocation",
            aiPredictions: "AI Predictions",
            simulateDisaster: "Simulate Disaster",
            refreshData: "Refresh Data",
            viewCachedData: "View Cached Data",
            viewDetailedReport: "View Detailed Report",
            resourceDistribution: "Resource Distribution",
            onlineMode: "Online Mode",
            admin: "Admin",
            profile: "Profile",
            logout: "Logout",
            foodPackets: "Food Packets",
            medicineKits: "Medicine Kits",
            rescueBoats: "Rescue Boats",
            high: "High",
            next24hNeeds: "Next 24h needs:",
            footerDescription: "AI-powered disaster response system for faster relief delivery.",
            quickLinks: "Quick Links",
            documentation: "Documentation",
            apiReference: "API Reference",
            trainingVideos: "Training Videos",
            contact: "Contact",
            helpline24: "24/7 Helpline:",
            developedBy: "Developed by",
            // Drone specific translations
        droneFleet: "Drone Fleet",
        dispatchControl: "Dispatch Control",
        selectDrone: "Select Drone",
        chooseDrone: "Choose Drone",
        destination: "Destination",
        enterCoordinates: "Enter coordinates or address",
        payloadKg: "Payload (kg)",
        dispatchDrone: "Dispatch Drone",
        emergencyStopAll: "Emergency Stop All",
        liveTracking: "Live Tracking",
        recenter: "Re-center",
        droneTelemetry: "Drone Telemetry",
        droneID: "Drone ID",
        latitude: "Latitude",
        longitude: "Longitude",
        altitude: "Altitude (m)",
        speed: "Speed (km/h)",
        battery: "Battery",
        status: "Status",
        lastUpdate: "Last Update",
        // Offline Page Specific
        offlineMode: "Offline Mode",
        offlineData: "Offline Data",
        lastSync: "Last sync: 5 min ago",
        cachedDisasters: "Cached Disasters",
        showingLocalData: "Showing data from local storage. Some features may be limited.",
        cachedResources: "Cached Resources",
        tryReconnect: "Try to Reconnect",
        clearLocalData: "Clear Local Data",
        offlineActions: "Offline Actions",
        addNewReport: "Add New Report",
        manualDisasterLog: "Manually log disaster information",
        createReport: "Create Report",
        updateInventory: "Update Inventory",
        adjustResourceCounts: "Adjust resource counts manually",
        updateCounts: "Update Counts",
        queueSync: "Queue Sync",
        prepareForSync: "Prepare data for later sync",
        queueChanges: "Queue Changes",
        // AI Predictions Page Specific
            predictions: "Predictions",
            demandForecast: "Demand Forecast",
            disasterType: "Disaster Type",
            flood: "Flood",
            earthquake: "Earthquake",
            cyclone: "Cyclone",
            pandemic: "Pandemic",
            region: "Region",
            assam: "Assam",
            bihar: "Bihar",
            gujarat: "Gujarat",
            kerala: "Kerala",
            aiInsights: "AI Insights",
            selectParameters: "Select parameters to generate predictions",
            modelPerformance: "Model Performance",
            last30DaysAccuracy: "Last 30 Days Accuracy",
            falsePositives: "False Positives",
            responseTime: "Response Time",
            predictionData: "Prediction Data",
            resource: "Resource",
            predictedNeed: "Predicted Need",
            confidence: "Confidence",
            lastActual: "Last Actual",
            variance: "Variance",
            // Route Optimization Page Specific
            routes: "Routes",
            planNewRoute: "Plan New Route",
            fromWarehouse: "From (Warehouse)",
            selectWarehouse: "-- Select Warehouse --",
            guwahatiCentral: "Guwahati Central",
            patnaStorage: "Patna Storage",
            mumbaiDepot: "Mumbai Depot",
            toDisasterZone: "To (Disaster Zone)",
            selectDisasterZone: "-- Select Disaster Zone --",
            assamFloodArea: "Assam Flood Area",
            biharFloodArea: "Bihar Flood Area",
            gujaratEarthquake: "Gujarat Earthquake",
            transportType: "Transport Type",
            truck: "Truck",
            drone: "Drone",
            boat: "Boat",
            priority: "Priority",
            normal: "Normal",
            highMedical: "High (Medical)",
            criticalRescue: "Critical (Rescue)",
            calculateOptimalRoute: "Calculate Optimal Route",
            avoidHazards: "Avoid Hazards",
            routeSummary: "Route Summary",
            noRouteCalculated: "No route calculated yet. Select locations to begin.",
            routeVisualization: "Route Visualization",
            print: "Print",
            alternativeRoutes: "Alternative Routes",
            calculateRoutePrompt: "Calculate a route to see alternatives",       
        },
        hi: {
            appTitle: "आपातकालीन आपूर्ति अनुकूलक",
            dashboard: "डैशबोर्ड",
            drones: "ड्रोन",
            offline: "ऑफ़लाइन",
            activeAlerts: "सक्रिय चेतावनियाँ",
            quickActions: "त्वरित कार्य",
            disasterMap: "आपदा मानचित्र",
            resourceAllocation: "संसाधन आवंटन",
            aiPredictions: "एआई भविष्यवाणियाँ",
            simulateDisaster: "आपदा अनुकरण",
            refreshData: "डेटा ताज़ा करें",
            viewCachedData: "कैश्ड डेटा देखें",
            viewDetailedReport: "विस्तृत रिपोर्ट देखें",
            resourceDistribution: "संसाधन वितरण",
            onlineMode: "ऑनलाइन मोड",
            admin: "व्यवस्थापक",
            profile: "प्रोफ़ाइल",
            logout: "लॉग आउट",
            foodPackets: "खाद्य पैकेट",
            medicineKits: "दवा किट",
            rescueBoats: "बचाव नौकाएँ",
            high: "उच्च",
            next24hNeeds: "अगले 24 घंटे की आवश्यकताएँ:",
            footerDescription: "तेज राहत वितरण के लिए एआई-संचालित आपदा प्रतिक्रिया प्रणाली।",
            quickLinks: "त्वरित लिंक",
            documentation: "दस्तावेज़ीकरण",
            apiReference: "एपीआई संदर्भ",
            trainingVideos: "प्रशिक्षण वीडियो",
            contact: "संपर्क करें",
            helpline24: "24/7 हेल्पलाइन:",
            developedBy: "द्वारा विकसित",
            // Drone specific translations
            droneFleet: "ड्रोन बेड़ा",
            dispatchControl: "प्रेषण नियंत्रण",
            selectDrone: "ड्रोन चुनें",
            chooseDrone: "ड्रोन चुनें",
            destination: "गंतव्य",
            enterCoordinates: "निर्देशांक या पता दर्ज करें",
            payloadKg: "पेलोड (किलो)",
            dispatchDrone: "ड्रोन भेजें",
            emergencyStopAll: "सभी को आपातकालीन रोकें",
            liveTracking: "लाइव ट्रैकिंग",
            recenter: "फिर से केंद्रित करें",
            droneTelemetry: "ड्रोन टेलीमेट्री",
            droneID: "ड्रोन आईडी",
            latitude: "अक्षांश",
            longitude: "देशांतर",
            altitude: "ऊंचाई (मी)",
            speed: "गति (किमी/घंटा)",
            battery: "बैटरी",
            status: "स्थिति",
            lastUpdate: "अंतिम अद्यतन",
                    // Offline Page Specific
            offlineMode: "ऑफ़लाइन मोड",
            offlineData: "ऑफ़लाइन डेटा",
            lastSync: "अंतिम सिंक: 5 मिनट पहले",
            cachedDisasters: "कैश्ड आपदाएँ",
            showingLocalData: "स्थानीय संग्रहण से डेटा दिखा रहे हैं। कुछ सुविधाएँ सीमित हो सकती हैं।",
            cachedResources: "कैश्ड संसाधन",
            tryReconnect: "पुन: कनेक्ट करने का प्रयास करें",
            clearLocalData: "स्थानीय डेटा साफ़ करें",
            offlineActions: "ऑफ़लाइन कार्रवाई",
            addNewReport: "नई रिपोर्ट जोड़ें",
            manualDisasterLog: "आपदा जानकारी मैन्युअल रूप से लॉग करें",
            createReport: "रिपोर्ट बनाएं",
            updateInventory: "इन्वेंटरी अपडेट करें",
            adjustResourceCounts: "संसाधन गणना मैन्युअल रूप से समायोजित करें",
            updateCounts: "गणना अपडेट करें",
            queueSync: "सिंक कतार",
            prepareForSync: "बाद में सिंक के लिए डेटा तैयार करें",
            queueChanges: "परिवर्तन कतारबद्ध करें",
            // AI Predictions Page Specific
            predictions: "भविष्यवाणियाँ",
            demandForecast: "मांग पूर्वानुमान",
            disasterType: "आपदा प्रकार",
            flood: "बाढ़",
            earthquake: "भूकंप",
            cyclone: "चक्रवात",
            pandemic: "महामारी",
            region: "क्षेत्र",
            assam: "असम",
            bihar: "बिहार",
            gujarat: "गुजरात",
            kerala: "केरल",
            aiInsights: "एआई अंतर्दृष्टि",
            selectParameters: "भविष्यवाणियां उत्पन्न करने के लिए पैरामीटर चुनें",
            modelPerformance: "मॉडल प्रदर्शन",
            last30DaysAccuracy: "पिछले 30 दिनों की सटीकता",
            falsePositives: "गलत सकारात्मक",
            responseTime: "प्रतिक्रिया समय",
            predictionData: "भविष्यवाणी डेटा",
            resource: "संसाधन",
            predictedNeed: "अनुमानित आवश्यकता",
            confidence: "आत्मविश्वास स्तर",
            lastActual: "अंतिम वास्तविक",
            variance: "विचरण",
            // Route Optimization Page Specific
        routes: "मार्ग",
        planNewRoute: "नया मार्ग योजना",
        fromWarehouse: "वेयरहाउस से",
        selectWarehouse: "-- वेयरहाउस चुनें --",
        guwahatiCentral: "गुवाहाटी सेंट्रल",
        patnaStorage: "पटना स्टोरेज",
        mumbaiDepot: "मुंबई डिपो",
        toDisasterZone: "आपदा क्षेत्र को",
        selectDisasterZone: "-- आपदा क्षेत्र चुनें --",
        assamFloodArea: "असम बाढ़ क्षेत्र",
        biharFloodArea: "बिहार बाढ़ क्षेत्र",
        gujaratEarthquake: "गुजरात भूकंप",
        transportType: "परिवहन प्रकार",
        truck: "ट्रक",
        drone: "ड्रोन",
        boat: "नाव",
        priority: "प्राथमिकता",
        normal: "सामान्य",
        highMedical: "उच्च (चिकित्सा)",
        criticalRescue: "महत्वपूर्ण (बचाव)",
        calculateOptimalRoute: "इष्टतम मार्ग की गणना करें",
        avoidHazards: "खतरों से बचें",
        routeSummary: "मार्ग सारांश",
        noRouteCalculated: "अभी तक कोई मार्ग गणना नहीं हुई है। शुरू करने के लिए स्थान चुनें।",
        routeVisualization: "मार्ग विज़ुअलाइज़ेशन",
        print: "प्रिंट",
        alternativeRoutes: "वैकल्पिक मार्ग",
        calculateRoutePrompt: "विकल्प देखने के लिए मार्ग की गणना करें",
    }
};

// Language manager class
class LanguageManager {
    constructor() {
        this.currentLang = localStorage.getItem('appLanguage') || 'en';
        this.applyLanguage();
    }

    switchLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('appLanguage', lang);
        this.applyLanguage();
    }

    applyLanguage() {
        const lang = translations[this.currentLang];
        
        // Update all elements with data-translate attribute
        document.querySelectorAll('[data-translate]').forEach(el => {
            const key = el.getAttribute('data-translate');
            if (lang[key]) {
                el.textContent = lang[key];
            }
        });

        // Update active button state
        document.querySelectorAll('[data-lang]').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-lang') === this.currentLang);
        });
    }
}

// Initialize and expose the manager
const languageManager = new LanguageManager();
window.languageManager = languageManager;